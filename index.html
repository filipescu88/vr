<!DOCTYPE html>
<html>
  <head>
    <title>Latanie z kolizjami i łapaniem obiektów</title>
    <meta charset="utf-8" />
    
    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

    <!-- aframe-extras (dodaje movement-controls i inne) -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.x/dist/aframe-extras.min.js"></script>

    <!-- Super-hands (łapie obiekty) -->
    <script src="https://unpkg.com/super-hands@^3.0.5/dist/super-hands.min.js"></script>

    <!-- Teraz usuwamy ewentualny konfliktowy grabbable -->
    <script>
      // Po załadowaniu super-hands usuwamy stary (z aframe-extras)
      if (AFRAME.components["grabbable"]?.dependencies?.includes("draggable")) {
        delete AFRAME.components["grabbable"];
      }
    </script>

    <!-- Fizyka -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.3/dist/aframe-physics-system.min.js"></script>
  </head>
  <body>
    <a-scene physics="gravity: 0 0 0" embedded>

      <!-- Gracz -->
      <a-entity id="rig"
                position="0 2 0"
                movement-controls="fly: true"
                universal-controls
                kinematic-body>
        
        <a-camera></a-camera>

        <!-- Lewa ręka -->
        <a-entity hand-controls="hand: left"
                  super-hands
                  sphere-collider="objects: a-box"></a-entity>

        <!-- Prawa ręka -->
        <a-entity hand-controls="hand: right"
                  super-hands
                  sphere-collider="objects: a-box"></a-entity>
      </a-entity>

      <!-- Interaktywny box -->
      <a-box position="0 1.5 -3"
             color="blue"
             hoverable
             grabbable
             stretchable
             draggable
             droppable
             dynamic-body>
      </a-box>

      <!-- Podłoga -->
      <a-plane rotation="-90 0 0"
               width="20" height="20"
               color="#ccc"
               static-body></a-plane>

      <!-- Ściana -->
      <a-box position="0 2 -6"
             depth="0.5"
             height="4"
             width="4"
             color="#aaa"
             static-body></a-box>

    </a-scene>
  </body>
</html>
